<?xml version="1.0" encoding="UTF-8"?>
<server>

  <!-- ==================================================================== -->
  <!-- Mail Connection Factory                                              -->
  <!-- ==================================================================== -->

  <mbean code="org.jboss.mail.MailService"
         name="jboss:service=Mail">
    <attribute name="JNDIName"><%= @params[:jndi_name] %></attribute>
    <attribute name="User"><%= @params[:username] %></attribute>
    <attribute name="Password"><%= @params[:password] %></attribute>
    <attribute name="Configuration">
      <!-- A test configuration -->
      <configuration>
        <!-- Change to your mail server prototocol -->
        <property name="mail.store.protocol" value="<%= @params[:mail_store_protocol]  %>"/>
        <property name="mail.transport.protocol" value="<%= @params[:mail_transport_protocol] %>"/>

        <!-- Change to the user who will receive mail  -->
        <property name="mail.user" value="<%= @params[:mail_user] %>"/>

        <!-- Change to the mail server  -->
        <property name="mail.pop3.host" value="<%= @params[:mail_pop3_host] %>"/>

        <!-- Change to the SMTP gateway server -->
        <property name="mail.smtp.host" value="<%= @params[:mail_smtp_host] %>"/>
                                                                                
        <!-- The mail server port -->
        <property name="mail.smtp.port" value="<%= @params[:mail_smtp_port] %>"/>
                                                                                                
        <!-- Change to the address mail will be from  -->
        <property name="mail.from" value="<%= @params[:mail_from] %>"/>

        <!-- Enable debugging output from the javamail classes -->
        <property name="mail.debug" value="<%= @params[:mail_debug] %>"/>
      </configuration>
    </attribute>
    <depends>jboss:service=Naming</depends>
  </mbean>

</server>
